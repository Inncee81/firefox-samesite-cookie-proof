<html>
  <head>
  <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/default.min.css">
  </head>
<body>
<noscript>You need to enable JavaScript to run this example.</noscript>
<h1>Proof that Firefox is not behaving like expected:</h1>
  <p>The result of the following snippet is shown below. <pre>undefined</pre> on FireFox, <pre>token-<DATE_ISO_STRING></pre> on other browsers like Chrome.
<pre>
<code class="language-javascript">
  function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length == 2) return parts.pop().split(";").shift();
  }

  document.getElementById("test-button")
    .addEventListener("click", function() {
      document.cookie = "XSRF-TOKEN=token-" + new Date().toISOString() + "; SameSite=Strict; Secure; Max-Age=3";
      document.getElementById("test").innerHTML = getCookie("XSRF-TOKEN");
  });
</code>
</pre>
</p>
  <button id="test-button">Test it</button>
<p id="test">
  not tested yet
</p>
<script>
  function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length == 2) return parts.pop().split(";").shift();
  }

  document.getElementById("test-button")
    .addEventListener("click", function() {
      document.cookie = "XSRF-TOKEN=token-" + new Date().toISOString() + "; SameSite=Strict; Secure; Max-Age=3";
      document.getElementById("test").innerHTML = getCookie("XSRF-TOKEN");
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
